{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "gAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766913103974.057}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "gAA"}, "timestamp": 1766913103974.497}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "gAA", "dry_run": false}, "timestamp": 1766913104042.636}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766913104042.732}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "gAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766913338560.404}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "gAA"}, "timestamp": 1766913338560.7778}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "gAA", "dry_run": false}, "timestamp": 1766913338627.975}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766913338628.1072}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:386", "message": "translate_document: Before API call", "data": {"client_exists": true, "api_key_set": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "w-S-OZTgAA", "model": "claude-sonnet-4-5-20250929"}, "timestamp": 1766913338740.158}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D,E", "location": "claude_client.py:411", "message": "translate_document: API call exception", "data": {"error_type": "AuthenticationError", "error_message": "Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CWYqC4yXDxbnPQa4G7KXD'}", "elapsed_time": 0.6154310703277588, "api_key_exists": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "w-S-OZTgAA", "api_key_starts_with_sk_ant": true, "status_code": 401, "has_response": true, "body_preview": "{'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CWYqC4yXDxbnPQa4G7KXD'}"}, "timestamp": 1766913339355.863}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "QAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766914063744.7969}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "QAA"}, "timestamp": 1766914063745.379}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1766914063812.137}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766914063812.309}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:386", "message": "translate_document: Before API call", "data": {"client_exists": true, "api_key_set": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "A-CRNMLQAA", "model": "claude-sonnet-4-5-20250929"}, "timestamp": 1766914063924.5022}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1766946751843.503}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "QAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766946751845.0762}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "QAA"}, "timestamp": 1766946751845.629}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "1c599fec-427d-4695-96d1-3082536f725b", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1766946751849.998}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "1c599fec-427d-4695-96d1-3082536f725b", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": false}, "timestamp": 1766946751912.76}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1766946751913.069}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766946751913.138}
