{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "gAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766913103974.057}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "gAA"}, "timestamp": 1766913103974.497}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "gAA", "dry_run": false}, "timestamp": 1766913104042.636}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766913104042.732}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "gAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766913338560.404}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "gAA"}, "timestamp": 1766913338560.7778}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "gAA", "dry_run": false}, "timestamp": 1766913338627.975}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766913338628.1072}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:386", "message": "translate_document: Before API call", "data": {"client_exists": true, "api_key_set": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "w-S-OZTgAA", "model": "claude-sonnet-4-5-20250929"}, "timestamp": 1766913338740.158}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D,E", "location": "claude_client.py:411", "message": "translate_document: API call exception", "data": {"error_type": "AuthenticationError", "error_message": "Error code: 401 - {'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CWYqC4yXDxbnPQa4G7KXD'}", "elapsed_time": 0.6154310703277588, "api_key_exists": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "w-S-OZTgAA", "api_key_starts_with_sk_ant": true, "status_code": 401, "has_response": true, "body_preview": "{'type': 'error', 'error': {'type': 'authentication_error', 'message': 'invalid x-api-key'}, 'request_id': 'req_011CWYqC4yXDxbnPQa4G7KXD'}"}, "timestamp": 1766913339355.863}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "QAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766914063744.7969}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "QAA"}, "timestamp": 1766914063745.379}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1766914063812.137}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766914063812.309}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:386", "message": "translate_document: Before API call", "data": {"client_exists": true, "api_key_set": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "A-CRNMLQAA", "model": "claude-sonnet-4-5-20250929"}, "timestamp": 1766914063924.5022}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1766946751843.503}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "QAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766946751845.0762}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "QAA"}, "timestamp": 1766946751845.629}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "1c599fec-427d-4695-96d1-3082536f725b", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1766946751849.998}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "1c599fec-427d-4695-96d1-3082536f725b", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": false}, "timestamp": 1766946751912.76}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1766946751913.069}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766946751913.138}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1766947532982.517}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "QAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1766947532983.583}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "QAA"}, "timestamp": 1766947532983.87}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "991ba912-09ee-4075-870b-c74cbe4e7da4", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1766947532987.139}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "991ba912-09ee-4075-870b-c74cbe4e7da4", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": false}, "timestamp": 1766947533067.6511}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1766947533068.175}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1766947533068.2659}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767037943076.527}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "QAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1767037943077.6638}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "QAA"}, "timestamp": 1767037943077.992}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "bb100b95-3e58-48c3-ae71-3eb17e4a973d", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767037943080.98}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "bb100b95-3e58-48c3-ae71-3eb17e4a973d", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": true}, "timestamp": 1767037943216.5452}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767037943216.741}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767037943216.817}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767037974572.5}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "5139d21c-6ed5-4d4a-b731-1248c3c7488e", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767037974577.2532}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "5139d21c-6ed5-4d4a-b731-1248c3c7488e", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": true}, "timestamp": 1767037974640.874}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767037974641.104}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767037974641.176}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767037988386.621}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "4b389e9d-ae21-4ff4-bd94-2dd5489229e0", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767037988390.6519}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "4b389e9d-ae21-4ff4-bd94-2dd5489229e0", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": false}, "timestamp": 1767037988452.8088}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767037988453.366}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767037988453.438}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767038011920.989}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "8b034034-4098-45cc-b8ef-68ace5c6ba18", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767038011924.9402}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "8b034034-4098-45cc-b8ef-68ace5c6ba18", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": false}, "timestamp": 1767038011986.5068}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767038011986.856}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767038011987.0981}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:386", "message": "translate_document: Before API call", "data": {"client_exists": true, "api_key_set": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "A-CRNMLQAA", "model": "claude-sonnet-4-5-20250929"}, "timestamp": 1767038011996.7417}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767038971918.726}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "4a8aa8dd-ec28-4895-a4d2-e2e4f2faf9df", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767038971923.656}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "4a8aa8dd-ec28-4895-a4d2-e2e4f2faf9df", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": true}, "timestamp": 1767038971993.354}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767038971993.5889}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767038971993.6472}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767039196401.812}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "ce1f44bd-a093-455c-ac17-9f4bc8fad14a", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767039196406.553}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "ce1f44bd-a093-455c-ac17-9f4bc8fad14a", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": false}, "timestamp": 1767039196478.109}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767039196478.9077}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767039196478.973}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767039226496.657}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "26bb951c-5881-48ad-96ff-6d3cd3a0b50a", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767039226501.23}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "26bb951c-5881-48ad-96ff-6d3cd3a0b50a", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": false}, "timestamp": 1767039226544.2612}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767039226544.701}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767039226544.7668}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:386", "message": "translate_document: Before API call", "data": {"client_exists": true, "api_key_set": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "A-CRNMLQAA", "model": "claude-sonnet-4-5-20250929"}, "timestamp": 1767039226554.4219}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767039382124.001}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,C,D", "location": "settings.py:23", "message": "ANTHROPIC_API_KEY env var check", "data": {"exists": true, "length": 108, "first_3_chars": "sk-", "last_3_chars": "QAA", "has_whitespace_start": false, "has_whitespace_end": false}, "timestamp": 1767039382124.9202}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "C", "location": "settings.py:26", "message": "API key after strip", "data": {"length": 108, "first_3": "sk-", "last_3": "QAA"}, "timestamp": 1767039382125.22}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "c62e09b3-8ea4-4a5a-997b-4d8c3286a219", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767039382128.302}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "c62e09b3-8ea4-4a5a-997b-4d8c3286a219", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": false}, "timestamp": 1767039382195.204}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767039382197.5242}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767039382197.664}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:386", "message": "translate_document: Before API call", "data": {"client_exists": true, "api_key_set": true, "api_key_length": 108, "api_key_first_10": "sk-ant-api", "api_key_last_10": "A-CRNMLQAA", "model": "claude-sonnet-4-5-20250929"}, "timestamp": 1767039382303.6743}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:677", "message": "User role from headers in start_translation", "data": {"user_role": "", "user_role_length": 0, "x_user_role_header": null, "x_user_role_lower_header": null}, "timestamp": 1767040273024.6028}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:214", "message": "User role from job storage", "data": {"job_id": "70c29add-ee59-42b6-84ca-f284c9ca932a", "user_role": "", "user_role_length": 0, "job_keys": ["status", "file_hash", "input_path", "source_lang", "target_lang", "glossary_path", "use_glossary", "skip_memory", "custom_prompt", "user_role", "reference_doc_path", "progress", "current_paragraph", "total_paragraphs", "cancelled", "request_id", "created_at"]}, "timestamp": 1767040273029.541}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "role-check", "location": "api.py:305", "message": "Loading prompt for role", "data": {"job_id": "70c29add-ee59-42b6-84ca-f284c9ca932a", "user_role": "", "user_role_repr": "''", "custom_prompt_provided": true}, "timestamp": 1767040273116.626}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "A,B,E", "location": "claude_client.py:115", "message": "ClaudeTranslator.__post_init__ entry", "data": {"api_key_exists": true, "api_key_length": 108, "api_key_first_3": "sk-", "api_key_last_3": "QAA", "dry_run": false}, "timestamp": 1767040273116.904}
{"sessionId": "debug-session", "runId": "run1", "hypothesisId": "E", "location": "claude_client.py:117", "message": "Creating Anthropic client", "data": {"api_key_provided": true, "api_key_length": 108}, "timestamp": 1767040273117.127}
